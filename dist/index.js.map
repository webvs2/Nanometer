{"version":3,"file":"index.js","sources":["../src/util.ts","../src/render.ts","../index.ts","../src/store/index.ts"],"sourcesContent":["\r\nexport let  className=(str:string):string=>{\r\n    return str.replace(/^\\s+|\\s+$/g,\"\")\r\n}\r\nexport let cssAttrSymbolTransition=(str:string):string=>{\r\n    let text= str.replace(/[A-Z]/g,function(con){\r\n        return `-${con.toLowerCase()}`\r\n    })\r\n    return text\r\n}","import { cssAttrSymbolTransition as cast} from \"./util\"\r\n\r\ninterface objType {\r\n  tag: string;\r\n  children?: any;\r\n  attr?: any;\r\n}\r\n\r\n let cssTransition=(attr)=>{\r\n    let text ='';\r\n    Object.keys(attr).map(item=>{\r\n      text= text  +`${cast(item)}:${attr[item]};`\r\n    })\r\n    return text\r\n }\r\n\r\nlet render = (obj: objType, root?: HTMLElement) => {\r\n  const el = document.createElement(obj.tag);\r\n  if (!!obj.attr) {\r\n    Object.keys(obj.attr).map((item) => {\r\n      let property: any = null;\r\n      if (typeof obj.attr?.[item] === \"object\") {\r\n        property = cssTransition(obj.attr?.[item]);\r\n      }\r\n      el.setAttribute(item, property || obj.attr?.[item]);\r\n    });\r\n  }\r\n  if (typeof obj.children == \"string\"||typeof obj.children == \"number\" ) {\r\n    const text = document.createTextNode( String( obj.children) );\r\n    el.appendChild(text);\r\n  } else if (obj.children) {\r\n    obj.children.forEach((element) => render(element, el));\r\n  }\r\n  return root ? root.appendChild(el) : el;\r\n};\r\nexport default render;\r\n","import \"./src/styles/index.scss\";\r\n// import { cloneDeep } from \"lodash\";\r\nimport render from \"./src/render\";\r\nimport { optionType, resultType } from \"./src/type\";\r\nimport { storeSteward } from \"./src/store/index\";\r\nimport { className} from \"./src/util\"\r\nlet store = new storeSteward([]);\r\n\r\n//\tExposure to message objects is not recommended, and is postEvented for more powerful boxes\r\n\r\nclass MessageClass {\r\n  defaultOption = {\r\n    type: \"info\",\r\n    durationTime: 1000, //ms\r\n    postEvent: null,\r\n    class: \"\",\r\n    center:true\r\n  };\r\n  option = {} as optionType;\r\n  seed: number = 0;\r\n  isContainer: boolean = false;\r\n  containerDom: HTMLElement;\r\n  constructor(option) {}\r\n\r\n  //class functionðŸš©\r\n  alteration(option) {\r\n    this.option = Object.assign({}, this.defaultOption, option);\r\n    this.establish();\r\n  }\r\n  establish() {\r\n    let { seed, option } = this;\r\n    this.seed++\r\n    if (!option.content) {throw '[message] If you use the object argument form, be aware!\"content\" is required';}\r\n    let id = \"message_\" + seed;\r\n    function MessageConstructor(data: {}): resultType {\r\n      const elem = render({\r\n        tag: \"div\",\r\n        children: [\r\n          {\r\n            tag: \"i\",\r\n            attr: {\r\n              class: `iconfont nan-icon icon-${option.type}`,\r\n            },\r\n          },\r\n          {\r\n            tag: \"span\",\r\n            children: option.content,\r\n          },\r\n        ],\r\n        attr: {\r\n          class:className(`alert-${option.type} nan-alert enter ${option.class}  ${\r\n            option.center ? \"center\" : \"\"\r\n          }`) ,\r\n          id: id,\r\n          style: { zIndex: 100 + seed},\r\n        },\r\n      });\r\n\r\n      return {\r\n        dom: elem,\r\n        id: id,\r\n        domID: `#${id}`,\r\n        source: data,\r\n      } as resultType;\r\n    }\r\n    //\t Generate and add to the bodyðŸ±â€ðŸ...\r\n    let messageBox = MessageConstructor(option);\r\n    let { source, dom } = messageBox;\r\n    source.durationTime = source.durationTime + seed * 100+ (typeof option.content ===\"string\"?option.content.length*6:0);\r\n    store.push(messageBox);\r\n    document.body.appendChild(dom);\r\n  }\r\n}\r\n\r\nlet MessageBox = new MessageClass({});\r\n\r\nlet message = (...data: any[]) => {\r\n  MessageBox.alteration(\r\n    data.length < 2\r\n      ? data[0]\r\n      : {\r\n          type: data[0],\r\n          content: data[1],\r\n        }\r\n  );\r\n};\r\nnew Array(\"success\", \"warning\", \"info\", \"error\").map((item, index) => {\r\n  message[item] = (value: any) => {\r\n    MessageBox.alteration({ type: item, content: value });\r\n  };\r\n});\r\nexport default message\r\n","  export  class storeSteward {\r\n    store: any[] = [];\r\n    pastDue: any[] = [];\r\n    constructor(Store) {\r\n      this.store = Store;\r\n      // this.pastDue = [];\r\n    }\r\n    push(value) {\r\n      let index = this.pastDue.length;\r\n      this.pastDue.push(this.timebomb(value, index));\r\n    }\r\n    timebomb(data, index) {\r\n      let { source, dom } = data;\r\n      return setTimeout(() => {\r\n        let { pastDue } = this;\r\n           \r\n        dom.className = \"out \" + dom.className;\r\n        dom.addEventListener(\r\n          \"animationend\",\r\n          function () {\r\n            source.postEvent?.();\r\n            document.body.removeChild(dom);\r\n          },\r\n          false\r\n        );\r\n        clearTimeout(pastDue[index]);\r\n        pastDue[index] = null;\r\n      }, source.durationTime);\r\n    }\r\n    closeAll() {\r\n      let { pastDue } = this;\r\n      pastDue.map((item, index) => {\r\n        clearTimeout(item);\r\n        item = null;\r\n      });\r\n      pastDue = [];\r\n      return new Promise((resolve, reject) => {\r\n        if (!pastDue.length) {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    }\r\n  }"],"names":["render","obj","root","el","document","createElement","tag","attr","Object","keys","map","item","property","_a","text","str","concat","replace","con","toLowerCase","cssTransition","_b","setAttribute","_c","children","createTextNode","String","appendChild","forEach","element","store","storeSteward","Store","this","pastDue","prototype","push","value","index","length","timebomb","data","_this","source","dom","setTimeout","className","addEventListener","postEvent","call","body","removeChild","clearTimeout","durationTime","closeAll","Promise","resolve","reject","MessageBox","MessageClass","option","defaultOption","type","class","center","seed","isContainer","alteration","assign","establish","content","id","messageBox","style","zIndex","domID","message","_i","arguments","Array"],"mappings":"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"}